<!DOCTYPE html>
<html lang="es">
	<head>
		<meta charset="UTF-8" />
		<title>IFCD0110-UF1305</title>
		<meta name="author" content="Javier Iglesias Romero" />
		<meta
			name="description"
			content="CONFECCIÓ I PUBLICACIÓ DE PÀGINES WEB (IFCD0110)"
		/>
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		
		<link rel="stylesheet" href="./footer.css" />

        <script defer src="./file.js"></script>
        <script>
			let input1 = false,
				input2 = false,
				input3 = false,
				input4 = false; //false
			function checkbutton() {
				if (input1 && input2 && input3 && input4) {
					formulario.campoButton.disabled = false;
				} else {
					formulario.campoButton.disabled = true;
				}
			}
		</script>
		<style>
			.green {
				background-color: green;
			}
			.orange {
				background-color: orange;
			}
			.blue{
				background-color: blue;
				color:white;
			}
		</style>
	
	</head>
	<body>
      

        <form id="formulario" action="javascript:('sitio.html')" method="GET" target="_blank">
			<fieldset>
            <legend>Modelo Exam JS</legend>

                <label id="tag_pos1">Introduce una operacion-----> </label>
				<label>RESULTADO</label>
				<br />
                <input type="text" onkeyup="aLaFuncion(this.value)" />
                <input type="text" id="salida" />
                <script>
                    const inputSalida = formulario.salida;
                    function aLaFuncion(texto) {
                        try {
                            inputSalida.value = eval(texto);
                            input1 = true;
                            checkbutton();
							formulario.salida.style.backgroundColor = "green";
                        } catch (err) {
                            inputSalida.value = "";
                            input1 = false;
                            checkbutton();
							formulario.salida.style.backgroundColor = "red";
                        }
                    }
                </script>
			<br />
			<br />
			<label>Introduce Nombre y apellidos</label>

			<br />
			<input
				type="text"
				onkeyup="aLaFuncionNombre(this.value)"
				id="nobreYApellidos"
			/>
			<script>
				function aLaFuncionNombre(texto) {
					//.replace(/  /g, "")
					let totalPalabras = texto.trim(/ +/g, "").replace().split(" ");
					console.log(totalPalabras);
					if (
						totalPalabras.length == 3 &&
						totalPalabras[0].length >= 3 &&
						totalPalabras[1].length >= 3 &&
						totalPalabras[2].length >= 3
					) {
						console.log("OK");
						if (totalPalabras[1] != totalPalabras[2]) {
							formulario.nobreYApellidos.style.backgroundColor = "green";
							input2 = true;
							checkbutton();
						} else {
							//los apellidos son iguales
							formulario.nobreYApellidos.style.backgroundColor = "red";
							input2 = false;
							checkbutton();
						}
					} else {
						input2 = false;
						checkbutton();
						//incorrecto
						formulario.nobreYApellidos.style.backgroundColor = "red";
					}
				}
			</script>
			<br />
			<br />
			<label>Codificar-------------------></label>
			<label>salidaCodificar-------------------></label>
			<label>salidaFormateada</label>
			<br />
			<input type="text" onkeyup="aLaFuncionHTML(this.value)" />
			<input type="text" id="salidaCodigo" />
			<input type="text" id="salidaFormateada" />
			<script>
				function aLaFuncionHTML(texto) {
					let textoLimpio = texto.trim();
					if (isNaN(textoLimpio)) {
						let textoSalida = textoLimpio
							.replaceAll("&lt;", "<")
							.replaceAll("&gt;", ">")
							.replaceAll("&quot;", '"')
							.replaceAll("&#39;", "'")
							.replaceAll("&#191;", "¿");

						formulario.salidaCodigo.value = textoSalida;
						input3 = true;
						checkbutton();
						formulario.salidaCodigo.style.backgroundColor = "green";
					} else {
						input3 = false;
						checkbutton();
						formulario.salidaCodigo.style.backgroundColor = "red";
					}
				}
			</script>
			<br />
			<br />
			<label for="email">Email:</label>
			<br/>
			<input type="mail" name="email" onkeyup="validarEmail(this.value)" />
			<script>
				function validarEmail(valor) {
				if (/^\w+([\.-]?\w+)*@(?:|hotmail|gmail)\.(?:|com|es)+$/.test(valor)){
					console.log("La dirección de email " + valor + " es correcta.");
							input4 = true;
							checkbutton();
							formulario.email.style.backgroundColor = "green";

				} else {
					console.log("La dirección de email es incorrecta.");
						input4 = false;
						checkbutton();
						formulario.email.style.backgroundColor = "red";
				}
			}
			</script>
			<br />
			<br />
			<input type="button" value="Enviar" id="campoButton" disabled />
        </fieldset>
		</form>
		<!-- FOOTER -->
		<footer id="footer">
			<p><b>author</b>: Javier Iglesias Romero</p>
			<p><a href="mailto:jiglesro7@mail.com">jiglesro7@mail.com</a></p>
			<p>
				<b>nom del curs</b>: CONFECCIÓ I PUBLICACIÓ DE PÀGINES WEB (IFCD0110)
			</p>
			<p><b>data</b>: 10/05/2022</p>
		</footer>
	</body>
</html>
